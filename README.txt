This code implements a tilt compensated compass on the adafruit NXP precision 9-DOF IMU.

First, you must calibrate your sensor for your environment / enclosure using the instructions on https://learn.adafruit.com/nxp-precision-9dof-breakout/calibration-usb

Then update the calibration results in the arduino code and upload to your arduino (connected to the NXP sensor). 

You can use the Processing code to visualise the compass output. 

Best, 

Ad Spiers